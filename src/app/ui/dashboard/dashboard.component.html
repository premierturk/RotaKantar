<div class="row">
  <app-card id="grid-card" class="col-md-8 col-sm-12 col-xs-12" [options]="false" [hidHeader]="true"
    style="padding: 0px 5px">
    <div class="row" style="align-items: flex-end">
      <div class="form-group col-md-4 col-sm-4">
        <label>Başlangıç Tarihi</label>
        <kendo-datepicker [(ngModel)]="basTar"> </kendo-datepicker>
      </div>

      <div class="form-group col-md-4 col-sm-4">
        <label>Bitiş Tarihi</label>
        <kendo-datepicker [(ngModel)]="bitTar"> </kendo-datepicker>
      </div>
      <div class="form-group col-md-2 col-sm-2 text-center">
        <button class="col-md-10 btn btn-primary" (click)="BindGrid()">
          <i class="fa-list far fas pr-2"></i>Listele
        </button>
      </div>
      <div class="form-group col-md-2 col-sm-2 text-center">
        <button [disabled]="!selectedItem" class="col-md-10 btn btn-info" (click)="Print(selectedItem)">
          <i class="fa-print far fas pr-2"></i>Yazdır
        </button>
      </div>
    </div>

    <kendo-grid #grid [data]="view" [selectable]="true" [navigable]="true" [pageSize]="state.take" [size]="'small'"
      [skip]="state.skip" [sortable]="true" [group]="state.group" [filter]="state.filter" [sort]="state.sort"
      kendoGridSelectBy="TartiNo" [pageable]="true" [filterable]="true" [resizable]="true" [selectedKeys]="mySelections"
      (cellClick)="onCellClick($event)" (dataStateChange)="dataStateChange($event)">
      <kendo-grid-column title="Firma Adı" field="FirmaAdi" [style]="{ 'white-space': 'nowrap' }"></kendo-grid-column>
      <kendo-grid-column title="Gittiği Yer" field="GittigiYer"
        [style]="{ 'white-space': 'nowrap' }"></kendo-grid-column>
      <kendo-grid-column title="Malzeme Adı" field="MalzemeAdi"
        [style]="{ 'white-space': 'nowrap' }"></kendo-grid-column>
      <kendo-grid-column [width]="100" title="Plaka" field="PlakaNo"></kendo-grid-column>
      <kendo-grid-column [width]="100" title="Dara" field="Dara"
        [style]="{ 'white-space': 'nowrap' }"></kendo-grid-column>
      <kendo-grid-column [width]="100" title="Net Tonaj" field="NetTonaj"></kendo-grid-column>
      <kendo-grid-column [width]="145" title="Tarih" field="TartiTarih">
        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
          {{ dataItem.TartiTarih | date : "dd/MM/yyyy HH:mm" }}
        </ng-template>
      </kendo-grid-column>
    </kendo-grid>
  </app-card>

  <app-card id="kantar-panel-card" class="col-md-4 col-sm-12 col-xs-12" [options]="false" [hidHeader]="true"
    style="padding: 0px 5px">
    <div class="modal-body" style="padding: 5px">
      <div class="form-group">
        <label>Plaka</label>
        <kendo-dropdownlist [popupSettings]="{ appendTo: 'component' }" [filterable]="true" class="width"
          [data]="f_dsPlaka" [textField]="'PlakaNo'" [valueField]="'AracId'" [valuePrimitive]="true"
          (filterChange)="handleFilterArac($event)" [(ngModel)]="formData.AracId" (valueChange)="plakaSelected($event)">
        </kendo-dropdownlist>
      </div>
      <div class="form-group">
        <label>Taş Ocağı</label>
        <kendo-dropdownlist [popupSettings]="{ appendTo: 'component' }" [filterable]="true" class="width"
          [data]="f_dsTasOcaklari" [textField]="'Adi'" [valueField]="'TasOcagiId'" [valuePrimitive]="true"
          (filterChange)="handleFilterTasOcak($event)" [(ngModel)]="formData.TasOcagiId">
        </kendo-dropdownlist>
      </div>
      <div class="form-group">
        <label>Gideceği Yer</label>
        <kendo-dropdownlist [popupSettings]="{ appendTo: 'component' }" [filterable]="true" class="width"
          [data]="f_dsProjeAlanlari" [textField]="'AlanAdi'" [valueField]="'ProjeAlanId'" [valuePrimitive]="true"
          (filterChange)="handleProjeAlanlari($event)" [(ngModel)]="formData.ProjeAlaniId">
        </kendo-dropdownlist>
      </div>
      <div class="form-group">
        <label>Firma</label>
        <kendo-textbox [disabled]="true" class="width" [clearButton]="true" [(ngModel)]="formData.FirmaAdi"
          placeholder="Firma">
        </kendo-textbox>
      </div>
      <div class="form-group">
        <label>Dara</label>
        <kendo-numerictextbox [disabled]="true" class="width" [spinners]="false" format="#" [(ngModel)]="formData.Dara"
          placeholder="Dara">
        </kendo-numerictextbox>
      </div>
      <div class="form-group">
        <label>Tonaj</label>
        <kendo-numerictextbox [disabled]="true" class="width" [spinners]="false" format="#" [(ngModel)]="formData.Tonaj"
          placeholder="Tonaj">
        </kendo-numerictextbox>
      </div>
      <div class="form-group">
        <label>Malzeme Türü</label>
        <kendo-dropdownlist [popupSettings]="{ appendTo: 'component' }" [filterable]="true" class="width"
          [data]="f_dsMalzemeTur" [textField]="'MalzemeTuru'" [valueField]="'MalzemeTuruId'" [valuePrimitive]="true"
          (filterChange)="handleFilterMalzeme($event)" [(ngModel)]="formData.MalzemeTipiId"
          placeholder="Başvuru Yılı Seçiniz">
        </kendo-dropdownlist>
      </div>
    </div>
    <div class="modal-footer" style="justify-content: space-evenly">
      <app-button [buttonType]="ButtonType.Kaydet" (onclick)="save()" [isdisabled]="isLoading == true"></app-button>

      <button class="btn btn-warning" (click)="daraGuncelle()">
        <i class="fa-truck far fas pr-2"></i>Dara Güncelle
      </button>
      <!-- <button class="btn btn-warning" (click)="clearForm()"> Temizle</button> -->
    </div>
    <div [hidden]="!isLoading">
      <div class="d-flex justify-content-center mb-2">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>
    </div>
  </app-card>
</div>